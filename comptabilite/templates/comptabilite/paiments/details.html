{% extends 'base.html' %}

{% block main %}
<div class="glass card p-6 rounded-md shadow-lg mx-auto max-w-3xl bg-base-100 print:max-w-full print:shadow-none print:p-2 print:bg-white">
  
  <!-- En-t√™te -->
  <header class="mb-8 text-center border-b pb-4 bg-secondary">
    <h1 class="text-3xl font-bold uppercase">Fiche de Paie</h1>
    <p class="text-sm ">G√©n√©r√©e le {{ payslip.generated_at|date:"d/m/Y √† H:i" }}</p>
  </header>

  <!-- Informations de l'employ√© -->
  <section class="mb-6">
    <h2 class="text-xl font-semibold mb-2 border-b">Informations de l'employ√©</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-2 text-base">
      <p><strong>Nom :</strong> {{ payslip.employee.user.get_full_name|default:payslip.employee.user }}</p>
      <p><strong>Poste :</strong> {{ payslip.employee.poste }}</p>
      <p><strong>D√©partement :</strong> {{ payslip.employee.departement.name }}</p>
      <p><strong>Date d'embauche :</strong> {{ payslip.employee.date_embauche|date:"d/m/Y" }}</p>
    </div>
  </section>

  <!-- P√©riode de paie -->
  <section class="mb-6">
    <h2 class="text-xl font-semibold mb-2 border-b">P√©riode</h2>
    <p class="text-base"><strong>Mois :</strong> {{ payslip.month }} / <strong>Ann√©e :</strong> {{ payslip.year }}</p>
  </section>

  <!-- D√©tails du salaire -->
  <section class="mb-6">
    <h2 class="text-xl font-semibold mb-2 border-b">R√©mun√©ration</h2>
    <div class="space-y-2 text-base">
      <div class="flex justify-between">
        <span>Salaire de base</span>
        <span>{{ payslip.base_salary|floatformat:2 }} GNF</span>
      </div>
      <div class="flex justify-between">
        <span>Bonus</span>
        <span>{{ payslip.bonus|floatformat:2 }} GNF</span>
      </div>
      <hr class="border-t">
      <div class="flex justify-between font-bold text-lg">
        <span>Total Net √† Payer</span>
        <span>{{ payslip.total|floatformat:2 }} GNF</span>
      </div>
    </div>
  </section>

  <!-- Signature -->
  <section class="mt-10">
    <div class="flex justify-between items-end text-sm text-gray-500">
      <div>
        <p>Pr√©par√© par : {{ payslip.generated_by.get_full_name|default:payslip.generated_by }}</p>
      </div>
      <div class="text-right">
        <p>Signature :</p>
        <div class="border-t border-gray-400 w-40 mt-2"></div>
      </div>
    </div>
  </section>

  <!-- Boutons -->
  <div class="mt-8 text-center print:hidden">
    <a href="{% url 'paiment_salary_list' %}" class="btn btn-outline btn-sm">‚Üê Retour √† la liste</a>
    <button onclick="window.print()" class="btn btn-primary btn-sm ml-2">üñ®Ô∏è Imprimer</button>
  </div>
</div>
{% endblock %}
